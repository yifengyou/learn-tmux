<!-- MDTOC maxdepth:6 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 -->

- [基本操作](#基本操作)   
   - [session会话操作](#session会话操作)   
      - [启动新会话](#启动新会话)   
      - [退出当前会话](#退出当前会话)   
      - [恢复会话](#恢复会话)   
      - [列出所有会话](#列出所有会话)   
      - [关闭会话](#关闭会话)   
      - [关闭所有会话](#关闭所有会话)   
      - [重命名当前会话](#重命名当前会话)   
      - [选择会话列表](#选择会话列表)   
   - [window窗口操作](#window窗口操作)   
      - [新建窗口](#新建窗口)   
      - [切换至上一窗口](#切换至上一窗口)   
      - [切换至下一窗口](#切换至下一窗口)   
      - [窗口列表选择](#窗口列表选择)   
      - [关闭当前窗口](#关闭当前窗口)   
      - [重命名窗口](#重命名窗口)   
      - [根据窗口名搜索选择窗口，可模糊匹配](#根据窗口名搜索选择窗口，可模糊匹配)   
   - [pane窗格操作](#pane窗格操作)   
      - [左右平分出两个窗格](#左右平分出两个窗格)   
      - [上下平分出两个窗格](#上下平分出两个窗格)   
      - [关闭当前窗格](#关闭当前窗格)   
      - [当前窗格前移](#当前窗格前移)   
      - [当前窗格后移](#当前窗格后移)   
      - [显示窗格标记](#显示窗格标记)   
      - [快速切换聚焦窗格](#快速切换聚焦窗格)   

<!-- /MDTOC -->
# 基本操作

## session会话操作

### 启动新会话

```
<Ctrl+b>  [new -s 会话名 -n 窗口名]
```

* -s存在则-n无效
* tmux new -s foo # 新建名称为 foo 的会话

### 退出当前会话

d detach 当前会话，运行后将会退出 tmux 进程，返回至 shell 主进程

```
<Ctrl+b>  d
```

### 恢复会话

```
<Ctrl+b>  at [-t 会话名]
```

### 列出所有会话

```
<Ctrl+b> ls
```

### 关闭会话

```
<Ctrl+b>  kill-session -t 会话名
```

### 关闭所有会话

```
tmux kill-server

闲的话也可以酱紫

tmux ls | grep : | cut -d. -f1 | awk '{print substr($1, 0, length($1)-1)}' | xargs kill
```

如果运行了多次 tmux 命令则会开启多个 tmux 会话（session）。在 tmux 会话中，使用前缀快捷键 ⌃b 配合以下快捷键可操作会话：

### 重命名当前会话

```
<Ctrl+b>  $
```

### 选择会话列表

```
<Ctrl+b>  s
```



在 shell 主进程下运行以下命令可以操作 tmux 会话：

- tmux ls # 列出所有 tmux 会话
- tmux a # 恢复至上一次的会话
- tmux a -t foo # 恢复名称为 foo 的会话，会话默认名称为数字
- tmux kill-session -t foo # 删除名称为 foo 的会话
- tmux kill-server # 删除所有的会话


除以上提到的快捷键以外，tmux 还有许多其他的快捷键和命令，使用前缀快捷键 ⌃b 加 ? 可以查看所有的快捷键列表，该列表视图为 tmux copy 模式，该模式下可使用以下快捷键（无需加 ⌃b 前缀）：

⌃v 下一页

Meta v 上一页 （tmux 快捷键为 Emacs 风格，这里的 Meta 键可用 Esc 模拟）

⌃s 向前搜索

q 退出 copy 模式


## window窗口操作

tmux 除了窗格以外，还有窗口（window） 的概念。依次使用以下快捷键来熟悉 tmux 的窗口操作：

### 新建窗口

```
<Ctrl+b>  c
```
* 此时当前窗口会切换至新窗口，不影响原有窗口的状态

### 切换至上一窗口

```
<Ctrl+b>  p
```

### 切换至下一窗口

```
<Ctrl+b>  n
```
### 窗口列表选择

```
<Ctrl+b>  w
```
* 注意 macOS 下使用 ⌃p 和 ⌃n 进行上下选择

### 关闭当前窗口

```
<Ctrl+b>  &
```

### 重命名窗口

```
<Ctrl+b>  ,
```
* 可以使用中文，重命名后能在 tmux 状态栏更快速的识别窗口 id



### 根据窗口名搜索选择窗口，可模糊匹配

```
<Ctrl+b>  f
```




## pane窗格操作

### 左右平分出两个窗格

```
<Ctrl+b> %
```

### 上下平分出两个窗格

```
<Ctrl+b> "
```


### 关闭当前窗格

```
<Ctrl+b> X
```

### 当前窗格前移

```
<Ctrl+b> {
```

### 当前窗格后移

```
<Ctrl+b> }
```
### 显示窗格标记

```
<Ctrl+b>  q
```

### 快速切换聚焦窗格

```
<Ctrl+b>  q
```
* 首先显示窗格标记（数字），然后快速按下对应窗格标记数字
* 0 切换至 0 号窗口，使用其他数字 id 切换至对应窗口



; 选择上次使用的窗格

o 选择下一个窗格，也可以使用上下左右方向键来选择

space 切换窗格布局，tmux 内置了五种窗格布局，也可以通过 ⌥1 至 ⌥5来切换

z 最大化当前窗格，再次执行可恢复原来大小

q 显示所有窗格的序号，在序号出现期间按下对应的数字，即可跳转至对应的窗格




* c 新建窗口，此时当前窗口会切换至新窗口，不影响原有窗口的状态
* p 切换至上一窗口
* n 切换至下一窗口
* w 窗口列表选择，注意 macOS 下使用 ⌃p 和 ⌃n 进行上下选择
* & 关闭当前窗口
* , 重命名窗口，可以使用中文，重命名后能在 tmux 状态栏更快速的识别窗口 id
* 0 切换至 0 号窗口，使用其他数字 id 切换至对应窗口
* f 根据窗口名搜索选择窗口，可模糊匹配

* % 左右平分出两个Pane
* " 上下平分出两个Pane
* x 关闭当前Pane
* { 当前Pane前移
* } 当前Pane后移

* ; 选择上次使用的窗格
* o 选择下一个窗格，也可以使用上下左右方向键来选择
* space 切换窗格布局，tmux 内置了五种窗格布局，也可以通过 ⌥1  至 ⌥5来切换
* z 最大化当前窗格，再次执行可恢复原来大小
* q 显示所有窗格的序号，在序号出现期间按下对应的数字，即可跳转至对应的窗格



窗格

<<Ctrl+b>> + "：进行水平分割
<<Ctrl+b>> + %：进行垂直分割
<<Ctrl+b>> + <方向鍵>：移动到其他窗格

<<Ctrl+b>> + <Space>:切换布局
<<Ctrl+b>> + x：关闭目前的窗格

会议
1 <<Ctrl+b>> + d.:把会话放到背景（detach）
2 . $ tmux at:附加到背景的会话
